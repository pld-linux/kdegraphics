%define		REV	20000418
Summary:	K Desktop Environment - Graphic Applications
Summary(pl):	K Desktop Environment - Aplikacje graficzne
Name:		kdegraphics
Version:	2.0
Release:	1.pre_%{REV}
Group:          X11/KDE/Graphics
Group(pl):      X11/KDE/Grafika
Copyright:      GPL
Source:		ftp://ftp.kde.org/pub/kde/snapshots/current/%{name}-%{REV}.tar.bz2
BuildRequires:	kdelibs-devel = %{version}
BuildRequires:	qt-devel >= 2.1.0
BuildRequires:	XFree86-devel >= 3.3.6
BuildRequires:	libstdc++-devel
BuildRequires:	libtiff-devel
BuildRequires:	libjpeg-devel
BuildRequires:	libungif-devel
BuildRequires:	libpng-devel
BuildRequires:	zlib-devel
Requires:	qt >= 2.0
Requires:	kdelibs = %{version}
BuildRoot:	%{tmpdir}/%{name}-%{version}-root-%(id -u -n)

%define 	_prefix		/usr/X11R6

%description
Graphic applications for the K Desktop Environment.

Included with this package are:

KDVI: displays TeX's device independent (.dvi) files
KFax: displays fax files
KFract: a fractal generator
KGhostview: displays postscript (.ps) files
KIconedit: icon editor
KPaint: a simple drawing program
KSnapshot: screen capture
KView: displays numerous graphic file formats 

%description -l pl
Aplikacje graficzne dla KDE.
Pakiet zawiera:
  KDVI - Przegl±darka plików DVI
  KFax - Program do wy¶wietlania faksów
  KFract - Generator fraktali
  KGhostview - Program do ogl±dania postscriptu (.ps)
  KIconedit - Program do edycji ikon dla KDE
  KPaint - Prosty program do grafiki rastrowej
  KSnapshot - program do przechwytywania wygl±du ekranu
  KView - Przegl±darka plików graficznych

%package kdvi
Summary:	KDE DVI viewer
Summary(pl):	Przegl±darka plików DVI dla KDE
Group:		X11/KDE/Graphics
Group(pl):	X11/KDE/Grafika
Requires:	qt >= 1.44
Requires:	kdelibs = %{version}

%description kdvi
A tool for viewing DVI files generated by TeX system.

%description -l pl kdvi
Program do przegl±dania plików DVI.

%package ksnapshot
Summary:	KDE Snap Shot
Summary(pl):	Program do przechwytywania ekranu dla KDE
Group:		X11/KDE/Graphics
Group(pl):	X11/KDE/Grafika
Requires:	qt >= 1.44
Requires:	kdelibs = %{version}

%description ksnapshot
Snapshot program for KDE.

%description -l pl ksnapshot
Program do przechwytywania ekranu dla KDE.

%package kiconedit
Summary:	KDE Icon Editor
Summary(pl):	Edytor ikon w ¶rodowisku KDE
Group:		X11/KDE/Graphics
Group(pl):	X11/KDE/Grafika
Requires:	qt >= 1.44
Requires:	kdelibs = %{version}

%description kiconedit
KDE Icon editor.

%description -l pl kiconedit
Edytor ikon dla KDE.

%package kfax
Summary:	KDE Fax viewer	
Summary(pl):	Przegl±darka faksów dla KDE
Group:		X11/KDE/Graphics
Group(pl):	X11/KDE/Grafika
Requires:	qt >= 1.44
Requires:	kdelibs = %{version}

%description kfax
A Fax viewer for KDE.

%description -l pl kfax
Program ten umo¿liwia przegl±danie plików faksowych (G3)

%package kfract
Summary:	KDE fractal generator	
Summary(pl):	Generator fraktali dla KDE
Group:		X11/KDE/Graphics
Group(pl):	X11/KDE/Grafika
Requires:	qt >= 1.44
Requires:	kdelibs = %{version}

%description kfract
A Fractal generator for KDE.

%description -l pl kfract
Generator fraktali dla KDE

%package kghostview 
Summary:	KDE Postscript viewer
Summary(pl):	Przegl±darka postscriptu dla KDE
Group:		X11/KDE/Graphics
Group(pl):	X11/KDE/Grafika
Requires:	qt >= 1.44
Requires:	kdelibs = %{version}

%description kghostview
Postscript files (.ps) viewer for KDE

%description -l pl kghostview
Program ten umo¿liwia przegl±danie plików postscriptowych (.ps) 

%package kpaint
Summary:	KDE Painter
Summary(pl):	Program graficzny KDE
Group:		X11/KDE/Graphics
Group(pl):	X11/KDE/Grafika
Requires:	qt >= 1.44
Requires:	kdelibs = %{version}

%description kpaint
A (very) simple painting program for KDE.

%description -l pl kpaint
(Bardzo) prosty program do rysowania pod KDE.

%package kview
Summary:	KDE graphics file viewer
Summary(pl):	Przegl±darka plików graficznych dla KDE
Group:		X11/KDE/Graphics
Group(pl):	X11/KDE/Grafika
Requires:	qt >= 1.44
Requires:	kdelibs = %{version}

%description kview
A graphics files viewer for KDE.

%description -l pl kfax
Program ten umo¿liwia ogl±danie ró¿nych plików graficznych (G3)

%prep
%setup -q -n %name

%build
make -f Makefile.cvs
export KDEDIR=%{_prefix}
CXXFLAGS="$RPM_OPT_FLAGS -Wall" \
CFLAGS="$RPM_OPT_FLAGS -Wall" \
./configure %{_target_platform} \
	--prefix=$KDEDIR \
	--with-qt-dir=%{_prefix} \
 	--with-install-root=$RPM_BUILD_ROOT \
 	--with-pam="yes"
make KDEDIR=$KDEDIR

%install
rm -rf $RPM_BUILD_ROOT
export KDEDIR=%{_prefix}
make RUN_KAPPFINDER=no prefix=$RPM_BUILD_ROOT$KDEDIR install

%find_lang kdvi
%find_lang kfax
%find_lang kfract
%find_lang kghostview
%find_lang kpaint
%find_lang kview
%find_lang ksnapshot
%find_lang kiconedit

%post -p /sbin/ldconfig
%postun -p /sbin/ldconfig

%post kview
/sbin/ldconfig

%postun kview
/sbin/ldconfig

%post kghostview
/sbin/ldconfig

%postun kghostview
/sbin/ldconfig

%clean
rm -rf $RPM_BUILD_ROOT

#%files
#%defattr(644,root,root,755)
#################################################
#             KDVI
#################################################

%files kdvi -f kdvi.lang
%defattr(644,root,root,755)

#%config(missingok) /etc/X11/kde/applnk/Graphics/kdvi.kdelnk

%attr(755,root,root) %{_bindir}/kdvi

%{_libdir}/libkdvi.*

#%lang(fi) %{_datadir}/kde/doc/HTML/fi/kdvi

%{_datadir}/apps/kdvi/

%{_datadir}/icons/hicolor/32x32/apps/kdvi.*
%{_datadir}/icons/hicolor/48x48/apps/kdvi.*

%{_datadir}/icons/locolor/16x16/apps/kdvi.*
%{_datadir}/icons/locolor/32x32/apps/kdvi.*

#################################################
#             KFAX
#################################################

%files kfax -f kfax.lang
%defattr(644,root,root,755)

#%config(missingok) /etc/X11/kde/applnk/Graphics/KFax.kdelnk

%attr(755,root,root) %{_bindir}/kfax

#%{_datadir}/kde/doc/HTML/en/kfax

%{_datadir}/apps/kfax/

%{_datadir}/icons/hicolor/32x32/apps/kfax.*
%{_datadir}/icons/hicolor/48x48/apps/kfax.*

%{_datadir}/icons/locolor/16x16/apps/kfax.*
%{_datadir}/icons/locolor/32x32/apps/kfax.*

#################################################
#             KFract
#################################################

%files kfract -f kfract.lang
%defattr(644,root,root,755)

#%config(missingok) /etc/X11/kde/applnk/Graphics/kfract.kdelnk

%attr(755,root,root) %{_bindir}/kfract

%{_datadir}/icons/hicolor/32x32/apps/kfract.*
%{_datadir}/icons/hicolor/48x48/apps/kfract.*

%{_datadir}/icons/locolor/16x16/apps/kfract.*
%{_datadir}/icons/locolor/32x32/apps/kfract.*

#################################################
#             KGHOSTVIEW
#################################################

%files kghostview -f kghostview.lang
%defattr(644,root,root,755)

#%config(missingok) /etc/X11/kde/applnk/Graphics/kghostview.kdelnk

%attr(755,root,root) %{_bindir}/kghostview

%{_libdir}/libkghostview.la
%{_libdir}/libkghostview.so.*.*.*

%{_datadir}/apps/kghostview

%{_datadir}/icons/hicolor/32x32/apps/kghostview.*
%{_datadir}/icons/hicolor/48x48/apps/kghostview.*

%{_datadir}/icons/locolor/16x16/apps/kghostview.*
%{_datadir}/icons/locolor/32x32/apps/kghostview.*

#################################################
#             KPAINT
#################################################

%files kpaint -f kpaint.lang
%defattr(644,root,root,755)

#%config(missingok) /etc/X11/kde/applnk/Graphics/kpaint.kdelnk

%attr(755,root,root) %{_bindir}/kpaint

%{_datadir}/apps/kpaint

%{_datadir}/icons/hicolor/32x32/apps/kpaint.*
%{_datadir}/icons/hicolor/48x48/apps/kpaint.*

%{_datadir}/icons/locolor/16x16/apps/kpaint.*
%{_datadir}/icons/locolor/32x32/apps/kpaint.*

#################################################
#             KSNAPSHOT
#################################################

%files ksnapshot -f ksnapshot.lang
%defattr(644,root,root,755)

#%config(missingok) /etc/X11/kde/applnk/Graphics/ksnapshot.kdelnk

%attr(755,root,root) %{_bindir}/ksnapshot

#%lang(cs) %{_datadir}/kde/doc/HTML/cs/ksnapshot

%{_datadir}/icons/hicolor/32x32/apps/ksnapshot.*
%{_datadir}/icons/hicolor/48x48/apps/ksnapshot.*

%{_datadir}/icons/locolor/16x16/apps/ksnapshot.*
%{_datadir}/icons/locolor/32x32/apps/ksnapshot.*

#################################################
#             KVIEW
#################################################

%files kview -f kview.lang
%defattr(644,root,root,755)

#%config(missingok) /etc/X11/kde/applnk/Graphics/kview.kdelnk

%attr(755,root,root) %{_bindir}/kview

%{_libdir}/libkview.la
%{_libdir}/libbaglayout.la

%{_libdir}/libkview.so
%{_libdir}/libbaglayout.so.*.*.*

%{_datadir}/apps/kview

%{_datadir}/icons/hicolor/32x32/apps/kview.*
%{_datadir}/icons/hicolor/48x48/apps/kview.*

%{_datadir}/icons/locolor/16x16/apps/kview.*
%{_datadir}/icons/locolor/32x32/apps/kview.*

#################################################
#             KICONEDIT
#################################################

%files kiconedit -f kiconedit.lang
%defattr(644,root,root,755)

#%config(missingok) /etc/X11/kde/applnk/Graphics/kiconedit.kdelnk

%attr(755,root,root) %{_bindir}/kiconedit

#%lang(da) %{_datadir}/kde/doc/HTML/da/kiconedit

%{_datadir}/apps/kiconedit

%{_datadir}/icons/hicolor/32x32/apps/kiconedit.*
%{_datadir}/icons/hicolor/48x48/apps/kiconedit.*

%{_datadir}/icons/locolor/16x16/apps/kiconedit.*
%{_datadir}/icons/locolor/32x32/apps/kiconedit.*

#####################################################
%files
#### katalog ####
%defattr(644,root,root,755)
%attr(755,root,root) %{_bindir}/katalog

%{_datadir}/apps/katalog

%{_datadir}/icons/hicolor/48x48/apps/katalog.*

%{_datadir}/icons/locolor/16x16/apps/katalog.*

#### kpixmap2bitmap ####
%attr(755,root,root) %{_bindir}/kpixmap2bitmap

#### libminimagick ####
%attr(644,root,root) %{_includedir}/magick/*.h

%attr(755,root,root) %{_libdir}/libminimagick.la
%attr(755,root,root) %{_libdir}/libminimagick.so.*.*.*

#### pixie ####
%attr(755,root,root) %{_bindir}/pixie

%attr(644,root,root) %{_includedir}/ifplugin.h

%attr(755,root,root) %{_libdir}/libkif_kdeeffects.la
%attr(755,root,root) %{_libdir}/libkif_kdeeffects.so.*.*.*
%attr(755,root,root) %{_libdir}/libkif_magick.la
%attr(755,root,root) %{_libdir}/libkif_magick.so.*.*.*
%attr(755,root,root) %{_libdir}/libkifplugin.la
%attr(755,root,root) %{_libdir}/libkifplugin.so.*.*.*
%attr(755,root,root) %{_libdir}/libpixie_color.la
%attr(755,root,root) %{_libdir}/libpixie_color.so.*.*.*
%attr(755,root,root) %{_libdir}/libpixie_thumb.la
%attr(755,root,root) %{_libdir}/libpixie_thumb.so.*.*.*
