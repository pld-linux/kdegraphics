diff -urN kdegraphics-3.0.3.orig/kghostview/dscparse.cpp kdegraphics-3.0.3/kghostview/dscparse.cpp
--- kdegraphics-3.0.3.orig/kghostview/dscparse.cpp	Sun Feb 17 18:38:24 2002
+++ kdegraphics-3.0.3/kghostview/dscparse.cpp	Sat Oct 12 12:18:24 2002
@@ -973,9 +973,13 @@
 	     */
 	    char begindata[MAXSTR+1];
 	    int cnt;
-	    const char *numberof, *bytesorlines;
-	    memcpy(begindata, dsc->line, dsc->line_length);
-	    begindata[dsc->line_length] = '\0';
+            unsigned int num;
+            const char *numberof, *bytesorlines;
+            if ((num = dsc->line_length) >= sizeof(begindata)-1)
+                num = sizeof(begindata)-1;
+
+            memcpy(begindata, dsc->line, num);
+            begindata[num] = '\0';
 	    numberof = strtok(begindata+12, " \r\n");
 	    strtok(NULL, " \r\n");	/* dump type */
 	    bytesorlines = strtok(NULL, " \r\n");
diff -urN kdegraphics-3.0.3.orig/kghostview/kgv_miniwidget.cpp kdegraphics-3.0.3/kghostview/kgv_miniwidget.cpp
--- kdegraphics-3.0.3.orig/kghostview/kgv_miniwidget.cpp	Mon Mar 18 13:42:36 2002
+++ kdegraphics-3.0.3/kghostview/kgv_miniwidget.cpp	Sat Oct 12 12:19:36 2002
@@ -834,29 +834,36 @@
                                     unsigned int firstPage,
                                     unsigned int lastPage )
 {
-    QString cmd = QString( "gs -q -dNOPAUSE -dBATCH -dSAFER -sDEVICE=pswrite "
-		           "-sOutputFile=\"%1\" -dFirstPage=%2 -dLastPage=%3 -c save "
-		           "pop -f \"%4\"" )
-                  .arg( QFile::encodeName( saveFileName ) )
-                  .arg( firstPage )
-		  .arg( lastPage )
-                  .arg( QFile::encodeName( _pdfFileName ) );
-
-    /*
-    QString cmd = QString( "pdftops -f %1 -l %2 \"%3\" \"%4\"" )
-                   .arg( firstPage )
-	           .arg( lastPage )
-	           .arg( QFile::encodeName( _pdfFileName ) )
-	           .arg( QFile::encodeName( saveFileName ) );
-    */
-    
-    // TODO -- timeout/fail on this conversion (it can hang on a bad pdf)
-    // TODO -- use output from gs (leave out -q) to drive a progress bar
-
-    kdDebug(4500) << "Executing command: " << cmd.local8Bit() << endl;
-    int r = system( cmd.local8Bit() );
+    KProcess process;
+    process << _interpreterPath
+            << "-q"
+            << "-dNOPAUSE"
+            << "-dBATCH"
+            << "-dSAFER"
+            << "-sDEVICE=pswrite"
+            << ( QCString("-sOutputFile=")+QFile::encodeName(saveFileName) )
+            << ( QString("-dFirstPage=")+QString::number( firstPage ) )
+            << ( QString("-dLastPage=")+QString::number( lastPage ) )
+            << "-c"
+            << "save"
+            << "pop"
+            << "-f"
+            << QFile::encodeName(_pdfFileName);
+
+    /*QValueList<QCString> args = process.args();
+    QValueList<QCString>::Iterator it = args.begin();
+    for ( ; it != args.end() ; ++it )
+        kdDebug() << ( *it ) << endl;*/
 
-    if( r ) {
+    if( !process.start( KProcess::Block ) )
+    {
+	kdError() << "convertFromPDF: Couldn't start gs process" << endl;
+	// TODO -- error message (gs not found?)
+	return false;
+    }
+    if ( !process.normalExit() || process.exitStatus() != 0 )
+    {
+	kdError() << "convertFromPDF: normalExit=" << process.normalExit() << " exitStatus=" << process.exitStatus() << endl;
 	// TODO -- error message (can't open, strerr())
 	return false;
     }
@@ -1146,7 +1153,8 @@
 	    free( comment );
 	    continue;
 	}
-	sscanf( comment + length("%%Pages:" ), "%s", text );
+	sscanf( comment + length("%%Pages:" ), "%256s", text );
+	text[256] = 0; // Just in case of an overflow
 	if( strcmp( text, "(atend)" ) == 0 ) {
 	    fputs( comment, to );
 	    pages_atend = true;
diff -urN kdegraphics-3.0.3.orig/kghostview/ps.c kdegraphics-3.0.3/kghostview/ps.c
--- kdegraphics-3.0.3.orig/kghostview/ps.c	Mon Jan 28 22:05:43 2002
+++ kdegraphics-3.0.3/kghostview/ps.c	Sat Oct 12 12:26:55 2002
@@ -71,9 +71,11 @@
 	if (!(DSCcomment(line) && iscomment(line+2, "Begin"))) {
 	    /* Do nothing */
 	} else if (iscomment(line+7, "Data:")) {
+            int rc = 0;
 	    text[0] = '\0';
-	    if (sscanf(line+length("%%BeginData:"),
-		       "%d %*s %s", &num, text) >= 1) {
+	    rc = sscanf(line+length("%%BeginData:"), "%d %*s %256s", &num,text);
+            text[256] = '\0';
+            if (rc >= 1) {
 		if (strcmp(text, "Lines") == 0) {
 		    for (i=0; i < num; i++) {
 			fgets(line, sizeof line, from);
@@ -148,9 +150,11 @@
 	if (!(DSCcomment(line) && iscomment(line+2, "Begin"))) {
 	    /* Do nothing */
 	} else if (iscomment(line+7, "Data:")) {
+            int rc = 0;
 	    text[0] = '\0';
-	    if (sscanf(line+length("%%BeginData:"),
-		       "%d %*s %s", &num, text) >= 1) {
+	    rc = sscanf(line+length("%%BeginData:"), "%d %*s %256s", &num,text);
+            text[256] = '\0';
+            if (rc >= 1) {
 		if (strcmp(text, "Lines") == 0) {
 		    for (i=0; i < num; i++) {
 			fgets(line, sizeof line, from);
